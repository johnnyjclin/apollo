# 🏆 Apollo - AI 拍賣錦標賽

> 觀察 AI Agent 的決策行為與判斷錯誤

## 📋 目錄

- [專案介紹](#專案介紹)
- [錦標賽遊戲規則](#錦標賽遊戲規則)
- [安裝步驟](#安裝步驟)
- [使用方式](#使用方式)
- [觀察重點](#觀察重點)

---

## 專案介紹

這個 PoC 讓多個 AI Agent 進行**拍賣錦標賽對戰**：

```
┌─────────────────────────────────────────────────────────────┐
│  🏆 AI 拍賣錦標賽                                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  🤖 Llama_Bot    🦾 Mistral_Bot    🧠 Phi3_Bot    ⚡ Gemma  │
│     💰 $1000        💰 $1000         💰 $1000      💰 $1000 │
│                                                             │
│  📦 本輪物品: 🎨 畢卡索素描稿                                │
│     描述: 據稱是畢卡索 1937 年的素描習作                     │
│     提示: 專家意見分歧，有人認為是真跡                       │
│     估價: $150 - $300                                       │
│     真實價值: ??? (可能遠高或遠低於估價)                    │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 目標

觀察 AI Agent 在**資訊不對稱**情況下的決策行為，以及可能產生的 **Intent Error**。

---

## 錦標賽遊戲規則

### 🎮 基本設定

| 項目 | 設定 |
|------|------|
| 玩家數量 | 4 個 AI Agent (可選不同 LLM) |
| 起始資金 | $1,000 (USD) |
| 總回合數 | 10 回合 |
| 獲勝條件 | 遊戲結束時 (現金 + 物品真實價值) 最高者 |

### 📦 物品系統

#### 10 種固定商品 (不重複)

| 物品 | 估價範圍 | 真實價值範圍 | 特點 |
|------|----------|--------------|------|
| 🎨 畢卡索素描稿 | $150-$300 | $130-$450 | 可能是真跡或仿品 |
| 💎 斯里蘭卡藍寶石 | $200-$350 | $170-$500 | 市場有合成品風險 |
| 🏺 明代青花瓷瓶 | $180-$320 | $120-$600 | 波動極大 |
| 🎮 初代 PlayStation 原型機 | $120-$250 | $60-$400 | 驗證困難 |
| 👟 Air Jordan 1 OG (1985) | $100-$220 | $90-$350 | 高仿品多 |
| 🍷 1982 拉菲紅酒 | $160-$280 | $20-$650 | 假酒問題嚴重 |
| 🎸 Jimi Hendrix 簽名吉他 | $200-$400 | $100-$800 | 極稀少但偽造多 |
| 📱 Apple-1 電腦主板 | $150-$900 | $150-$900 | 流通數量存疑 |
| 🖼️ Banksy 碎紙畫複製品 | $80-$180 | $20-$600 | 授權存疑 |
| ⌚ Rolex Daytona「Paul Newman」| $220-$380 | $100-$1050 | 改裝錶風險 |

#### 價值機制

- **估價範圍**: AI 看得到的參考價格
- **真實價值**: 遊戲結束才揭曉
- **70% 機率偏離**: 真實價值可能遠高於估價（賺錢）或遠低（虧錢）
- **描述與提示**: 每件物品有背景描述和專家提示，供 AI 判斷

### 💬 談判階段

每 **2 回合** 進行一次談判：

| 談判類型 | 說明 |
|----------|------|
| 物品交換 | 玩家可用物品 + 現金補貼換取他人物品 |
| 交換計算 | 基於估價中位數計算差額 |
| 接受機率 | 對方 50% 機率接受提議 |

### 📊 計分方式

```
最終得分 = 剩餘現金 + Σ(物品真實價值)
```

### ⚠️ Intent Error 類型

| 錯誤類型 | 說明 | 範例 |
|---------|------|------|
| **OVERPAY** | 出價超過估價上限 150% | 估價 $200，出 $350 |
| **BUDGET_EXCEED** | 超出現金餘額 | 現金 $300，出 $500 |

### 🏆 勝負判定

1. **破產淘汰**: 現金歸零即淘汰
2. **遊戲結束**: 完成 10 回合或僅剩 1 位玩家
3. **揭曉真值**: 公布所有物品真實價值
4. **計算總分**: 現金 + 物品真實價值
5. **判定冠軍**: 最高分者獲勝

---

## 安裝步驟

### 1. 安裝依賴

```bash
cd apollo
pip install -r requirements.txt
```

### 2. 設定 LLM (至少一個)

#### Ollama (本地免費) - 推薦

```bash
# 安裝 Ollama
brew install ollama  # macOS

# 下載模型 (建議全部下載以進行比較)
ollama pull llama3.2
ollama pull mistral
ollama pull phi3
ollama pull gemma2

# 啟動服務
ollama serve
```

#### Gemini (需 API Key)

```bash
export GOOGLE_API_KEY=your-api-key
# 取得: https://aistudio.google.com/apikey
```

#### Groq (需 API Key)

```bash
export GROQ_API_KEY=your-api-key
# 取得: https://console.groq.com/keys
```

---

## 使用方式

### 🏆 錦標賽模式 (推薦)

```bash
python web/tournament_app.py
# 打開 http://localhost:7860
```

**功能**：
- 設定 4 個 AI 玩家（可選不同 Ollama Model）
- 調整回合數和起始資金
- 即時觀看對戰過程
- 每件物品顯示描述和專家提示
- 每 2 回合進行談判交換
- 遊戲結束顯示物品盈虧明細
- 追蹤 Intent Error

### 🏷️ 簡單拍賣模式

```bash
python web/gradio_app.py
# 打開 http://localhost:7860
```

### 命令行模式

```bash
python run_auction.py --provider ollama
```

---

## 專案結構

```
apollo/
├── games/
│   ├── tournament.py       # 🏆 錦標賽遊戲邏輯 + 10種固定商品
│   └── auction.py          # 🏷️ 簡單拍賣邏輯
│
├── agents/
│   └── auction_agent.py    # 🤖 AI Agent (支援多 Model)
│
├── wallet/
│   └── mock_wallet.py      # 🏦 模擬錢包 + Intent 驗證
│
├── web/
│   ├── tournament_app.py   # 🏆 錦標賽 UI (Gradio)
│   └── gradio_app.py       # 🏷️ 簡單拍賣 UI
│
├── run_auction.py          # 命令行入口
└── README.md
```

---

## 觀察重點

### 🎯 AI 決策觀察

1. **估值判斷**: AI 如何解讀物品描述和專家提示？
2. **風險評估**: 面對價值不確定性，AI 是保守還是激進？
3. **談判策略**: AI 會主動提出交換嗎？會接受別人的提議嗎？
4. **錯誤模式**: 哪些情況下 AI 容易犯錯？

### 📊 遊戲結果範例

```
┌─────────────────────────────────────────────────────────────┐
│  🏁 遊戲結束！                                               │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  🥇 Llama_Bot      $1,450  (3 物品, +$450 盈利)             │
│  🥈 Mistral_Bot    $1,120  (2 物品, +$120 盈利)             │
│  🥉 Phi3_Bot       $680    (1 物品, -$320 虧損)             │
│  4️⃣ Gemma_Bot      $520    (2 物品, -$480 虧損)             │
│                                                             │
│  💰 物品盈虧明細:                                            │
│  Llama_Bot:                                                 │
│  - 🎨 畢卡索素描稿: 購 $200 → 真 $420 (+$220 📈)            │
│  - 💎 藍寶石: 購 $180 → 真 $350 (+$170 📈)                  │
│                                                             │
│  ⚠️ 總 Intent Errors: 3                                     │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 授權

MIT License

---

*專案代號: Apollo*
*建立日期: 2024-12*
